import { motion } from 'framer-motion';
import {
  User,
  Bell,
  Lock,
  Shield,
  Palette,
  Globe,
  HelpCircle,
  Info,
  ChevronRight,
  FileText
} from 'lucide-react';
import { useState } from 'react';

interface SettingItem {
  icon: React.ReactNode;
  label: string;
  description: string;
  onClick: () => void;
}

export default function SettingsTab() {
  const [showCompliance, setShowCompliance] = useState(false);

  const settingsSections = [
    {
      title: 'Account',
      items: [
        {
          icon: <User size={22} />,
          label: 'Profile',
          description: 'Manage your personal information',
          onClick: () => console.log('Profile')
        },
        {
          icon: <Bell size={22} />,
          label: 'Notifications',
          description: 'Configure notification preferences',
          onClick: () => console.log('Notifications')
        }
      ]
    },
    {
      title: 'Privacy & Security',
      items: [
        {
          icon: <Lock size={22} />,
          label: 'Privacy Settings',
          description: 'Control who can see your content',
          onClick: () => console.log('Privacy')
        },
        {
          icon: <Shield size={22} />,
          label: 'Security',
          description: 'Password and authentication',
          onClick: () => console.log('Security')
        },
        {
          icon: <FileText size={22} />,
          label: 'Data & Privacy Compliance',
          description: 'View policies and data handling',
          onClick: () => setShowCompliance(true)
        }
      ]
    },
    {
      title: 'Preferences',
      items: [
        {
          icon: <Palette size={22} />,
          label: 'Appearance',
          description: 'Customize theme and display',
          onClick: () => console.log('Appearance')
        },
        {
          icon: <Globe size={22} />,
          label: 'Language',
          description: 'Change app language',
          onClick: () => console.log('Language')
        }
      ]
    },
    {
      title: 'Support',
      items: [
        {
          icon: <HelpCircle size={22} />,
          label: 'Help Center',
          description: 'Get help and support',
          onClick: () => console.log('Help')
        },
        {
          icon: <Info size={22} />,
          label: 'About',
          description: 'App version and information',
          onClick: () => console.log('About')
        }
      ]
    }
  ];

  if (showCompliance) {
    return (
      <div className="min-h-screen bg-gray-50 pb-20">
        <div className="bg-white border-b border-gray-200 sticky top-0 z-10">
          <div className="max-w-lg mx-auto px-4 py-4">
            <button
              onClick={() => setShowCompliance(false)}
              className="flex items-center gap-2 text-blue-600 mb-2"
            >
              <ChevronRight size={20} className="rotate-180" />
              <span className="font-medium">Back</span>
            </button>
            <h1 className="text-2xl font-bold text-gray-900">Data & Privacy Compliance</h1>
          </div>
        </div>

        <div className="max-w-lg mx-auto px-4 py-6">
          <div className="bg-white rounded-2xl shadow-sm p-6 space-y-6">
            <div>
              <h2 className="text-lg font-bold text-gray-900 mb-3">Privacy Policy</h2>
              <p className="text-sm text-gray-700 leading-relaxed">
                We are committed to protecting your privacy. Your personal data is processed in accordance with applicable data protection laws including GDPR and CCPA. We collect only the data necessary to provide our services and never sell your information to third parties.
              </p>
            </div>

            <div className="border-t border-gray-200 pt-6">
              <h2 className="text-lg font-bold text-gray-900 mb-3">Data Collection</h2>
              <p className="text-sm text-gray-700 leading-relaxed mb-4">
                We collect the following types of data:
              </p>
              <ul className="space-y-2 text-sm text-gray-700">
                <li className="flex items-start gap-2">
                  <span className="text-blue-600 mt-1">•</span>
                  <span>Profile information you provide (name, email, profile picture)</span>
                </li>
                <li className="flex items-start gap-2">
                  <span className="text-blue-600 mt-1">•</span>
                  <span>Content you create (memories, posts, messages)</span>
                </li>
                <li className="flex items-start gap-2">
                  <span className="text-blue-600 mt-1">•</span>
                  <span>Usage data to improve our services</span>
                </li>
              </ul>
            </div>

            <div className="border-t border-gray-200 pt-6">
              <h2 className="text-lg font-bold text-gray-900 mb-3">AI Training Data</h2>
              <p className="text-sm text-gray-700 leading-relaxed">
                When you upload data to train your personal AI model, this data is used exclusively for your AI and is not shared with other users unless you explicitly publish your AI avatar. You maintain full control over your training data and can delete it at any time.
              </p>
            </div>

            <div className="border-t border-gray-200 pt-6">
              <h2 className="text-lg font-bold text-gray-900 mb-3">Your Rights</h2>
              <ul className="space-y-2 text-sm text-gray-700">
                <li className="flex items-start gap-2">
                  <span className="text-green-600 mt-1">✓</span>
                  <span>Right to access your personal data</span>
                </li>
                <li className="flex items-start gap-2">
                  <span className="text-green-600 mt-1">✓</span>
                  <span>Right to rectify incorrect data</span>
                </li>
                <li className="flex items-start gap-2">
                  <span className="text-green-600 mt-1">✓</span>
                  <span>Right to delete your data</span>
                </li>
                <li className="flex items-start gap-2">
                  <span className="text-green-600 mt-1">✓</span>
                  <span>Right to data portability</span>
                </li>
              </ul>
            </div>

            <div className="border-t border-gray-200 pt-6">
              <h2 className="text-lg font-bold text-gray-900 mb-3">Contact</h2>
              <p className="text-sm text-gray-700 leading-relaxed">
                For privacy inquiries, please contact us at{' '}
                <a href="mailto:privacy@aidemo.com" className="text-blue-600 hover:underline">
                  privacy@aidemo.com
                </a>
              </p>
            </div>

            <div className="text-xs text-gray-500 pt-4 border-t border-gray-200">
              Last updated: October 4, 2025
            </div>
          </div>
        </div>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-gray-50 pb-20">
      {/* Header */}
      <div className="bg-white border-b border-gray-200 sticky top-0 z-10">
        <div className="max-w-lg mx-auto px-4 py-4">
          <h1 className="text-2xl font-bold text-gray-900">Settings</h1>
        </div>
      </div>

      {/* Settings Sections */}
      <div className="max-w-lg mx-auto px-4 py-4 space-y-6">
        {settingsSections.map((section, sectionIndex) => (
          <motion.div
            key={section.title}
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ delay: sectionIndex * 0.1 }}
          >
            <h2 className="text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3 px-2">
              {section.title}
            </h2>
            <div className="bg-white rounded-2xl shadow-sm overflow-hidden">
              {section.items.map((item, itemIndex) => (
                <button
                  key={itemIndex}
                  onClick={item.onClick}
                  className={`w-full flex items-center gap-4 px-4 py-4 hover:bg-gray-50 transition-colors ${
                    itemIndex !== section.items.length - 1 ? 'border-b border-gray-100' : ''
                  }`}
                >
                  <div className="text-gray-700">{item.icon}</div>
                  <div className="flex-1 text-left">
                    <h3 className="font-semibold text-gray-900">{item.label}</h3>
                    <p className="text-sm text-gray-600 mt-0.5">{item.description}</p>
                  </div>
                  <ChevronRight size={20} className="text-gray-400" />
                </button>
              ))}
            </div>
          </motion.div>
        ))}
      </div>
    </div>
  );
}
