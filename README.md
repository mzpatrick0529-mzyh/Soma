# ğŸ§¡ Soma - æƒ…æ„Ÿäº¤äº’å¼æ•°å­—è®°å¿†å¹³å°

<div align="center">

[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)
[![Node.js](https://img.shields.io/badge/node-%3E%3D18.0.0-brightgreen.svg)](https://nodejs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.0+-blue.svg)](https://www.typescriptlang.org/)

</div>

---

## ğŸ’¡ äº§å“ç®€ä»‹

**Somaæ˜¯ä¸€ä¸ªæƒ…æ„Ÿäº¤äº’å¼æ•°å­—è®°å¿†å¹³å°ã€‚** äººä»¬æ¸´æœ›ä¸é€å»çš„æŒšçˆ±"ç»§ç»­å¯¹è¯",è€Œé™æ€çš„ç…§ç‰‡å’ŒèŠå¤©è®°å½•æ— æ³•æ»¡è¶³è¿™ç§æ·±å±‚æƒ…æ„Ÿéœ€æ±‚ã€‚Somaé€šè¿‡èšåˆç”¨æˆ·çš„å¤šæ¨¡æ€æ•°å­—è¶³è¿¹(èŠå¤©è®°å½•ã€éŸ³è§†é¢‘ã€ç¤¾äº¤åª’ä½“),åœ¨å¼€æºæ¨¡å‹ä¸Šè¿›è¡Œä¸ªæ€§åŒ–å¾®è°ƒ,ç”Ÿæˆèƒ½æ¨¡æ‹ŸçœŸå®ç”¨æˆ·è¡Œä¸ºé£æ ¼å’Œä¸»åŠ¨è¡¨è¾¾çš„AIæ•°å­—åˆ†èº«ã€‚ç”¨æˆ·å¯é€šè¿‡æ–‡æœ¬ã€è¯­éŸ³å¯¹è¯ã€è§†é¢‘åˆ†äº«å’Œå‘å¸ƒåšå®¢ç­‰å½¢å¼,ä¸æ•°å­—åˆ†èº«äº’åŠ¨,å®ƒä¼šç”¨ç†Ÿæ‚‰çš„è¯­æ°”ä¸»åŠ¨é—®å€™ã€åˆ†äº«"è¿‘å†µ",å»¶ç»­æƒ…æ„Ÿè¿æ¥ã€‚äº§å“é‡‡ç”¨"ä¸ºè‡ªå·±åˆ›å»ºæ•°å­—åˆ†èº«"çš„å‰ç½®è®¾è®¡,é€šè¿‡æ•°å­—é—äº§ä¼ æ‰¿åè®®è§£å†³ä¼¦ç†å›°å¢ƒ,æœåŠ¡äºå¯»æ±‚æƒ…æ„Ÿæ…°è—‰çš„"æƒ…æ„Ÿå»¶ç»­è€…"å’Œè¿½æ±‚æ•°å­—æ°¸ç”Ÿçš„"å…ˆè¡Œæ¢ç´¢è€…"ã€‚

**Soma is an emotionally interactive digital memory platform.** People yearn to "continue conversations" with departed loved ones, but static photos and chat logs cannot fulfill this profound emotional need. Soma aggregates users' multimodal digital footprints (chat histories, audio/video, social media) to fine-tune open-source models, **creating AI avatars that authentically replicate behavioral styles and proactive expression**. Users interact through text and voice conversations, video sharing, and blog postsâ€”the avatar initiates greetings in familiar tones, shares "updates," and sustains emotional bonds. Employing a "create for yourself first" approach and Digital Legacy Inheritance Protocol to resolve ethical concerns, Soma serves "Sentimentalists" seeking emotional comfort and "Pioneers" pursuing digital immortality.

---

## ğŸ“‹ ç›®å½•

- [æ ¸å¿ƒåŠŸèƒ½](#-æ ¸å¿ƒåŠŸèƒ½)
- [æŠ€æœ¯æ¶æ„](#-æŠ€æœ¯æ¶æ„)
- [ç³»ç»Ÿæ¶æ„å›¾](#-ç³»ç»Ÿæ¶æ„å›¾)
- [åŠŸèƒ½æ¨¡å—](#-åŠŸèƒ½æ¨¡å—)
- [æ€§èƒ½æŒ‡æ ‡](#-æ€§èƒ½æŒ‡æ ‡é¢„æœŸç›®æ ‡)
- [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
- [é…ç½®è¯´æ˜](#ï¸-é…ç½®è¯´æ˜)
- [éƒ¨ç½²æŒ‡å—](#-éƒ¨ç½²æŒ‡å—)
- [éšç§ä¸æ¡æ¬¾](#-éšç§ä¸æ¡æ¬¾)
- [é¡¹ç›®è·¯çº¿å›¾](#ï¸-é¡¹ç›®è·¯çº¿å›¾)
- [è´¡çŒ®æŒ‡å—](#-è´¡çŒ®æŒ‡å—)
- [è®¸å¯è¯](#-è®¸å¯è¯)

---

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### ğŸ­ ä¸ªæ€§åŒ–AIæ•°å­—åˆ†èº«
- **å¤šæ¨¡æ€å­¦ä¹ **: ä»èŠå¤©è®°å½•ã€éŸ³è§†é¢‘ã€ç¤¾äº¤åª’ä½“æ•°æ®ä¸­å­¦ä¹ 
- **è¡Œä¸ºé£æ ¼å¤åˆ¶**: ç²¾å‡†æ¨¡æ‹Ÿç”¨æˆ·çš„è¯­è¨€é£æ ¼ã€è¡¨è¾¾ä¹ æƒ¯ã€æƒ…æ„Ÿæ¨¡å¼
- **ä¸»åŠ¨è¡¨è¾¾**: ä¸ä»…å“åº”,è¿˜èƒ½ä¸»åŠ¨å‘èµ·å¯¹è¯ã€åˆ†äº«"è¿‘å†µ"
- **æŒç»­è¿›åŒ–**: é€šè¿‡äº¤äº’ä¸æ–­ä¼˜åŒ–,è¶Šç”¨è¶Šåƒæœ¬äºº

### ğŸ’¬ æƒ…æ„Ÿäº¤äº’ä½“éªŒ
- **æ–‡æœ¬å¯¹è¯**: ç†Ÿæ‚‰çš„è¯­æ°”,æ¸©æš–çš„å›åº”
- **è¯­éŸ³é€šè¯**: çœŸå®çš„å£°éŸ³,è‡ªç„¶çš„è¯­è°ƒ
- **è§†é¢‘åˆ†äº«**: è™šæ‹Ÿå½¢è±¡,ç”ŸåŠ¨çš„è¡¨æƒ…
- **åšå®¢å‘å¸ƒ**: AIåˆ†èº«å¯ä»¥"å†™æ—¥è®°","åˆ†äº«ç”Ÿæ´»"

### ğŸ”’ éšç§ä¸ä¼¦ç†
- **"ä¸ºè‡ªå·±åˆ›å»º"**: ç”¨æˆ·é¦–å…ˆä¸ºè‡ªå·±åˆ›å»ºæ•°å­—åˆ†èº«
- **æ•°å­—é—äº§ä¼ æ‰¿**: åˆæ³•çš„ç»§æ‰¿åè®®,å°Šé‡é—æ„¿
- **æ•°æ®åŠ å¯†**: ç«¯åˆ°ç«¯åŠ å¯†,ç¡®ä¿éšç§å®‰å…¨
- **è®¿é—®æ§åˆ¶**: ç»†ç²’åº¦çš„æƒé™ç®¡ç†

### ğŸŒ æ•°æ®å¯¼å…¥æ”¯æŒ
- âœ… å¾®ä¿¡èŠå¤©è®°å½•å¯¼å…¥
- âœ… Instagram æ•°æ®å¯¼å…¥
- âœ… Google Takeout æ•°æ®å¯¼å…¥
- âœ… iCloud ç…§ç‰‡åŒæ­¥
- ğŸš§ æ›´å¤šå¹³å°æŒç»­æ¥å…¥ä¸­...

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

Soma é‡‡ç”¨ç°ä»£åŒ–çš„å…¨æ ˆæ¶æ„,å…·å¤‡é«˜æ€§èƒ½ã€é«˜å¯é æ€§å’Œå¯æ‰©å±•æ€§:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         å‰ç«¯å±‚                               â”‚
â”‚            (React + TypeScript + Tailwind CSS)              â”‚
â”‚   ç»„ä»¶: Chatç•Œé¢ | Memoriesç®¡ç† | ä¸ªäººä¸­å¿ƒ | å¯è§†åŒ–çœ‹æ¿          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“ REST API
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         åç«¯å±‚                               â”‚
â”‚                  (Node.js + Express)                        â”‚
â”‚  è·¯ç”±: Auth | Chat | Memory | RAG | Personality | Import     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       AIå¼•æ“å±‚                               â”‚
â”‚              (Python + ML/NLP Stack)                        â”‚
â”‚  â€¢ RAGå¼•æ“: æ£€ç´¢å¢å¼ºç”Ÿæˆ (L0å­˜å‚¨+åµŒå…¥ | L1èåˆ | L2ä¼ è®°)         â”‚
â”‚  â€¢ Personality Manager: ä¸ªæ€§åŒ–å¾®è°ƒä¸è®°å¿†å¯¹é½                   â”‚
â”‚  â€¢ HDBSCANèšç±»: 4ç»´åˆ†æ(æƒ…æ„Ÿ/ä»·å€¼è§‚/äº‹å®/ä¼ è®°)                  â”‚
â”‚  â€¢ Promptæ„å»º: Me-Alignmentæç¤ºå·¥ç¨‹                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        æ•°æ®å±‚                                â”‚
â”‚                 (Supabase + FTS5)                           â”‚
â”‚  â€¢ L0 Tables: åŸå§‹è®°å¿†(æ–‡æœ¬/å›¾ç‰‡/éŸ³é¢‘/è§†é¢‘)                     â”‚
â”‚  â€¢ L1 Tables: RLHFæ ·æœ¬(æ­£æ ·æœ¬/è´Ÿæ ·æœ¬/ä¸­æ€§)                     â”‚
â”‚  â€¢ L2 Tables: ä¼ è®°æ„å»º(èšç±»/ä¸»é¢˜/ç”Ÿå‘½é˜¶æ®µ)                      â”‚
â”‚  â€¢ Vector Store: pgvector è¯­ä¹‰æœç´¢                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š ç³»ç»Ÿæ¶æ„å›¾

### æ•´ä½“æ¶æ„

```mermaid
graph TB
    subgraph "å‰ç«¯ Frontend"
        A[React App] --> B[Chat ç•Œé¢]
        A --> C[Memories ç®¡ç†]
        A --> D[ä¸ªäººä¸­å¿ƒ]
        A --> E[æ•°æ®å¯¼å…¥]
    end
    
    subgraph "åç«¯ Backend"
        F[API Gateway] --> G[è®¤è¯æœåŠ¡]
        F --> H[å¯¹è¯æœåŠ¡]
        F --> I[è®°å¿†æœåŠ¡]
        F --> J[RAG å¼•æ“]
        F --> K[å¯¼å…¥æœåŠ¡]
    end
    
    subgraph "AI å¼•æ“"
        L[Personality Manager] --> M[æ¨¡å‹è®­ç»ƒ]
        L --> N[è®°å¿†å¯¹é½]
        L --> O[HDBSCAN èšç±»]
        J --> L
    end
    
    subgraph "æ•°æ®åº“"
        P[Supabase] --> Q[L0: åŸå§‹è®°å¿†]
        P --> R[L1: RLHF æ ·æœ¬]
        P --> S[L2: ä¼ è®°æ•°æ®]
        P --> T[Vector Store]
    end
    
    A --> F
    F --> L
    L --> P
```

### æ•°æ®æµå‘

```mermaid
sequenceDiagram
    participant U as ç”¨æˆ·
    participant F as å‰ç«¯
    participant B as åç«¯API
    participant R as RAGå¼•æ“
    participant P as Personality
    participant D as æ•°æ®åº“
    
    U->>F: å‘é€æ¶ˆæ¯
    F->>B: POST /api/chat
    B->>R: æ£€ç´¢ç›¸å…³è®°å¿†
    R->>D: å‘é‡æœç´¢
    D-->>R: è¿”å›ç›¸å…³è®°å¿†
    R->>P: æ„å»ºä¸Šä¸‹æ–‡
    P->>P: Me-Alignmentæç¤º
    P-->>B: ç”Ÿæˆä¸ªæ€§åŒ–å›å¤
    B-->>F: è¿”å›AIå›å¤
    F-->>U: æ˜¾ç¤ºå›å¤
```

---

## ğŸ§© åŠŸèƒ½æ¨¡å—

### æ¨¡å—å…³ç³»è¡¨

| æ¨¡å—åç§° | åŠŸèƒ½æè¿° | ä¾èµ–å…³ç³» | æŠ€æœ¯æ ˆ | çŠ¶æ€ |
|---------|---------|---------|--------|------|
| **å‰ç«¯åº”ç”¨** | ç”¨æˆ·ç•Œé¢å’Œäº¤äº’ | - | React + TypeScript + Tailwind | âœ… å·²å®Œæˆ |
| **è®¤è¯æœåŠ¡** | ç”¨æˆ·ç™»å½•/æ³¨å†Œ/OAuth | æ•°æ®åº“ | Google OAuth 2.0 | âœ… å·²å®Œæˆ |
| **å¯¹è¯æœåŠ¡** | Chatç•Œé¢å’Œæ¶ˆæ¯ç®¡ç† | RAGå¼•æ“ + Personality | Express + WebSocket | âœ… å·²å®Œæˆ |
| **è®°å¿†æœåŠ¡** | è®°å¿†å­˜å‚¨å’Œæ£€ç´¢ | æ•°æ®åº“ + Vector Store | Supabase + pgvector | âœ… å·²å®Œæˆ |
| **RAGå¼•æ“** | æ£€ç´¢å¢å¼ºç”Ÿæˆ | Vector Store + AIæ¨¡å‹ | LangChain + OpenAI API | âœ… å·²å®Œæˆ |
| **Personality Manager** | ä¸ªæ€§åŒ–è®­ç»ƒå’Œå¾®è°ƒ | RAGå¼•æ“ + æ•°æ®åº“ | Python + ML Stack | ğŸš§ å¼€å‘ä¸­ |
| **å¯¼å…¥æœåŠ¡** | å¤šå¹³å°æ•°æ®å¯¼å…¥ | è®°å¿†æœåŠ¡ | Multi-parser | âœ… éƒ¨åˆ†å®Œæˆ |
| **å¾®ä¿¡å¯¼å…¥** | å¾®ä¿¡èŠå¤©è®°å½•è§£æ | è§£å¯†æœåŠ¡ + å¯¼å…¥æœåŠ¡ | Python + Node.js | âœ… å·²å®Œæˆ |
| **Instagramå¯¼å…¥** | Instagramæ•°æ®å¯¼å…¥ | å¯¼å…¥æœåŠ¡ | JSON Parser | âœ… å·²å®Œæˆ |
| **Googleå¯¼å…¥** | Google Takeoutå¯¼å…¥ | å¯¼å…¥æœåŠ¡ | JSON Parser | âœ… å·²å®Œæˆ |
| **iCloudåŒæ­¥** | ç…§ç‰‡å®æ—¶åŒæ­¥ | è®°å¿†æœåŠ¡ | Apple API | ğŸ“‹ è®¡åˆ’ä¸­ |
| **è¯­éŸ³æœåŠ¡** | è¯­éŸ³å¯¹è¯åŠŸèƒ½ | å¯¹è¯æœåŠ¡ + TTS/STT | ElevenLabs / OpenAI | ğŸ“‹ è®¡åˆ’ä¸­ |
| **è§†é¢‘æœåŠ¡** | è§†é¢‘åˆ†äº«å’Œç”Ÿæˆ | å¯¹è¯æœåŠ¡ + è§†é¢‘ç”Ÿæˆ | D-ID / HeyGen | ğŸ“‹ è®¡åˆ’ä¸­ |

### æ•°æ®å±‚çº§ç»“æ„

| å±‚çº§ | åç§° | æè¿° | æ•°æ®é‡çº§ | æ›´æ–°é¢‘ç‡ |
|-----|------|------|---------|---------|
| **L0** | åŸå§‹è®°å¿† | ç”¨æˆ·ä¸Šä¼ çš„åŸå§‹æ•°æ®(æ–‡æœ¬/å›¾ç‰‡/éŸ³é¢‘/è§†é¢‘) | 10K-100Kæ¡/ç”¨æˆ· | å®æ—¶ |
| **L1** | RLHFæ ·æœ¬ | äººç±»åé¦ˆçš„å¼ºåŒ–å­¦ä¹ æ ·æœ¬(å¥½/å/ä¸­æ€§) | 1K-10Kæ¡/ç”¨æˆ· | ç”¨æˆ·äº¤äº’æ—¶ |
| **L2** | ä¼ è®°æ•°æ® | èšç±»åçš„ä¸»é¢˜ã€ç”Ÿå‘½é˜¶æ®µã€æ€§æ ¼ç‰¹å¾ | 100-1Kæ¡/ç”¨æˆ· | æ¯æ—¥æ‰¹å¤„ç† |
| **Vector** | å‘é‡ç´¢å¼• | è¯­ä¹‰åµŒå…¥å‘é‡,ç”¨äºå¿«é€Ÿæ£€ç´¢ | ä¸L0åŒæ­¥ | å®æ—¶ |

---

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡(é¢„æœŸç›®æ ‡)

ä»¥ä¸‹æ˜¯ Soma V2.0 (Memory-based) ç‰ˆæœ¬çš„è®¾è®¡ç›®æ ‡:

| æŒ‡æ ‡ | V1.0 (ç‰¹å¾å·¥ç¨‹) | V2.0 (è®°å¿†é©±åŠ¨) | æå‡ | è¯´æ˜ |
|------|----------------|----------------|------|------|
| **å›¾çµæµ‹è¯•é€šè¿‡ç‡** | 65-70% | 95%+ | +25-30 points | åŸºäºè®°å¿†å¯¹é½çš„AIæ›´çœŸå® |
| **è¯­è¨€ä¸€è‡´æ€§** | 70% | 95% | +25% | è¯­è¨€é£æ ¼æ›´æ¥è¿‘æœ¬äºº |
| **æƒ…æ„Ÿå‡†ç¡®æ€§** | 65% | 92% | +27% | æƒ…æ„Ÿè¡¨è¾¾æ›´è‡ªç„¶ |
| **ä»·å€¼è§‚åŒ¹é…** | 60% | 95% | +35% | ä»·å€¼è§‚å’Œä¿¡å¿µæ›´ä¸€è‡´ |
| **äº‹å®å‡†ç¡®æ€§** | 80% | 98% | +18% | åŸºäºçœŸå®è®°å¿†,äº‹å®æ›´å‡†ç¡® |
| **å“åº”å»¶è¿Ÿ (P95)** | <1.0s | <2.0s | +1s | å¤æ‚æ£€ç´¢ç¨æ…¢ä½†å¯æ¥å— |

> âš ï¸ **é‡è¦è¯´æ˜**: ä»¥ä¸ŠæŒ‡æ ‡ä¸ºç³»ç»Ÿè®¾è®¡çš„**é¢„æœŸç›®æ ‡**,ä»£è¡¨æˆ‘ä»¬åŠªåŠ›è¾¾æˆçš„æ–¹å‘ã€‚å®é™…æ€§èƒ½ä¼šéšç€æ•°æ®è´¨é‡ã€ç”¨æˆ·ä½¿ç”¨æ–¹å¼ã€æ¨¡å‹è®­ç»ƒç¨‹åº¦è€Œå˜åŒ–ã€‚è¿™ä¸æ˜¯å¯¹æœ€ç»ˆæ•ˆæœçš„æ‰¿è¯º,è€Œæ˜¯äº§å“è¿­ä»£çš„åŒ—ææ˜ŸæŒ‡æ ‡ã€‚

æ ¸å¿ƒçªç ´: ä»"ç‰¹å¾å‘é‡"åˆ°"æ´»è®°å¿†"çš„èŒƒå¼è½¬å˜,å®ç°äººæ ¼ä»"é™æ€å¿«ç…§"åˆ°"åŠ¨æ€æˆé•¿ç³»ç»Ÿ"çš„å‡çº§ã€‚

è¯¦ç»†å¯¹æ¯”è¯·å‚é˜…: [V1 VS V2 COMPARISON.md](Self_AI_Agent/docs/personality/V1_VS_V2_COMPARISON.md)

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Node.js >= 18.0.0
- npm >= 9.0.0
- PostgreSQL >= 14.0 (æˆ–ä½¿ç”¨ Supabase)
- Python >= 3.9 (ç”¨äºAIæœåŠ¡)

### å®‰è£…æ­¥éª¤

1. **å…‹éš†ä»“åº“**

```bash
git clone https://github.com/mzpatrick0529-mzyh/Soma.git
cd Soma
```

2. **å®‰è£…ä¾èµ–**

```bash
# å‰ç«¯ä¾èµ–
npm install

# åç«¯ä¾èµ–
cd Self_AI_Agent
npm install
cd ..
```

3. **é…ç½®ç¯å¢ƒå˜é‡**

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp config/env/.env.development .env

# ç¼–è¾‘ .env æ–‡ä»¶,å¡«å…¥å¿…è¦çš„é…ç½®
# - SUPABASE_URL: Supabaseé¡¹ç›®URL
# - SUPABASE_ANON_KEY: SupabaseåŒ¿åå¯†é’¥
# - GOOGLE_CLIENT_ID: Google OAuthå®¢æˆ·ç«¯ID
# - OPENAI_API_KEY: OpenAI APIå¯†é’¥(å¯é€‰,ç”¨äºRAG)
```

4. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**

```bash
# ç»ˆç«¯1: å¯åŠ¨å‰ç«¯
npm run dev

# ç»ˆç«¯2: å¯åŠ¨åç«¯
cd Self_AI_Agent
npm run dev
```

5. **è®¿é—®åº”ç”¨**

æ‰“å¼€æµè§ˆå™¨è®¿é—®: http://127.0.0.1:8080

---

## âš™ï¸ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

å…³é”®é…ç½®æ–‡ä»¶ä½äº `config/env/`:

- `.env.development` - å¼€å‘ç¯å¢ƒé…ç½®
- `.env.production.example` - ç”Ÿäº§ç¯å¢ƒé…ç½®æ¨¡æ¿

ä¸»è¦é…ç½®é¡¹:

```bash
# Supabaseé…ç½®
SUPABASE_URL=your_supabase_url
SUPABASE_ANON_KEY=your_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key

# Google OAuth
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret

# OpenAI (å¯é€‰)
OPENAI_API_KEY=your_openai_key

# æœåŠ¡ç«¯å£
SELF_AGENT_PORT=8787
VITE_PORT=8080
```

### æ•°æ®åº“è®¾ç½®

è¯¦ç»†çš„æ•°æ®åº“é…ç½®æŒ‡å—è¯·å‚é˜…:
- [æ•°æ®åº“æ¶æ„](docs/database/DATABASE_ARCHITECTURE_DIAGRAM.md)
- [Supabaseè¿ç§»æŒ‡å—](docs/database/SUPABASE_MIGRATION.md)
- [æ•°æ®åº“è®¾ç½®](docs/database/README.md)

---

## ğŸŒ éƒ¨ç½²æŒ‡å—

### Docker éƒ¨ç½²

```bash
# æ„å»ºé•œåƒ
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

### Vercel éƒ¨ç½²(å‰ç«¯)

```bash
# å®‰è£… Vercel CLI
npm i -g vercel

# éƒ¨ç½²
vercel --prod
```

### Render éƒ¨ç½²(åç«¯)

è¯¦ç»†éƒ¨ç½²æŒ‡å—è¯·å‚é˜…:
- [éƒ¨ç½²æŒ‡å—](docs/guides/DEPLOYMENT_GUIDE.md)
- [å¿«é€Ÿéƒ¨ç½²](docs/guides/QUICK_DEPLOY.md)
- [è¿ç»´è„šæœ¬](ops/README.md)

---

## ğŸ” éšç§ä¸æ¡æ¬¾

æˆ‘ä»¬éå¸¸é‡è§†ç”¨æˆ·éšç§å’Œæ•°æ®å®‰å…¨:

- ğŸ“„ [éšç§æ”¿ç­– Privacy Policy](src/pages/PrivacyPolicy.tsx) - [åœ¨çº¿æŸ¥çœ‹](https://soma.ai/privacy)
- ğŸ“„ [æœåŠ¡æ¡æ¬¾ Terms of Service](src/pages/TermsOfServicePage.tsx) - [åœ¨çº¿æŸ¥çœ‹](https://soma.ai/terms)
- ğŸ“„ [æ³•å¾‹æ–‡æ¡£](docs/legal/README.md)

æ ¸å¿ƒåŸåˆ™:
- âœ… æ•°æ®åŠ å¯†å­˜å‚¨(AES-256)
- âœ… ä¸å‡ºå”®ç”¨æˆ·æ•°æ®
- âœ… æ”¯æŒæ•°æ®å¯¼å‡ºå’Œåˆ é™¤
- âœ… ç¬¦åˆGDPRã€CCPAç­‰æ³•è§„
- âœ… é€æ˜çš„æ•°æ®ä½¿ç”¨è¯´æ˜

---

## ğŸ¤– Self AI Agent - è®­ç»ƒä¸è¿è¡Œæµç¨‹

Self AI Agentæ˜¯Somaçš„æ ¸å¿ƒAIå¼•æ“,è´Ÿè´£ä¸ªæ€§åŒ–æ¨¡å‹è®­ç»ƒã€æ¨ç†å’ŒæŒç»­å­¦ä¹ ã€‚

### æ¶æ„æ¦‚è§ˆ

```mermaid
graph TB
    subgraph "Phase 0-1: æ•°æ®åŸºç¡€ä¸åˆ†æ"
        P0A[åŸå§‹è®°å¿†æ•°æ®] --> P1A[Profile Analyzer]
        P0A --> P1B[Relationship Analyzer]
        P1A --> P0B[(Persona Profiles<br/>6å±‚äººæ ¼å»ºæ¨¡)]
        P1B --> P0C[(Relationship Profiles<br/>å…³ç³»å›¾è°±)]
        P0B --> P2A
        P0C --> P2A
    end
    
    subgraph "Phase 2: å¤šä»»åŠ¡è®­ç»ƒ"
        P2A[Sample Augmenter<br/>æ•°æ®å¢å¼º] --> P2B[Multi-Task Trainer<br/>4ç§æŸå¤±è”åˆä¼˜åŒ–]
        P2B --> P2C[å¾®è°ƒåäººæ ¼æ¨¡å‹]
    end
    
    subgraph "Phase 3: ä¸Šä¸‹æ–‡æ„ŸçŸ¥æ¨ç†"
        P2C --> A[Context Detector<br/>4ç»´ä¸Šä¸‹æ–‡æ£€æµ‹]
        A --> E[Inference Engine<br/>åŠ¨æ€æ¨ç†]
        B[Persona Selector<br/>æƒé‡è°ƒæ•´] --> E
        C[Conversation Memory<br/>3å±‚è®°å¿†] --> E
        D[Enhanced Prompt Builder<br/>å¤šå±‚èåˆ] --> E
        E --> F[Style Calibrator<br/>é£æ ¼æ ¡å‡†]
        F --> G[Fact Checker<br/>äº‹å®éªŒè¯]
    end
    
    subgraph "Phase 4: åé¦ˆä¸åœ¨çº¿å­¦ä¹ "
        G --> H[Feedback Collector<br/>æ˜¾å¼+éšå¼]
        H --> I[Reward Model<br/>RLHF-lite]
        I --> J[Online Learner<br/>å¢é‡æ›´æ–°]
        J --> K[Drift Detector<br/>æ¼‚ç§»ç›‘æµ‹]
        K --> L[A/B Testing<br/>ç‰ˆæœ¬å¯¹æ¯”]
        L --> P2C
    end
    
    subgraph "Phase 5-6: æ·±åº¦è®¤çŸ¥å»ºæ¨¡"
        M[Values Inferencer<br/>15ç±»ä»·å€¼+å†²çªæ£€æµ‹] --> P[Theory of Mind<br/>3å±‚é€è§†é€’å½’]
        N[Emotions Tracker<br/>è®¤çŸ¥è¯„ä»·ç†è®º] --> P
        O[Causal Reasoner<br/>5ç§æ¨ç†+çŸ¥è¯†å›¾è°±] --> P
        P --> Q[Narrative Generator<br/>ç”Ÿå‘½å™äº‹]
    end
    
    subgraph "Phase 7: ç”Ÿäº§ä¼˜åŒ–"
        Q --> R[Model Quantization<br/>INT8+å‰ªæ+è’¸é¦]
        R --> U[ML Server<br/>3å®ä¾‹+LB]
        S[Intelligent Cache<br/>4ç­–ç•¥é¢„çƒ­] --> U
        T[Load Balancer<br/>Nginxè½®è¯¢] --> U
        U --> V[Monitoring<br/>Prometheus+Grafana]
    end
    
    P --> E
```

### æ ¸å¿ƒç»„ä»¶

| ç»„ä»¶ | Phase | åŠŸèƒ½ | çŠ¶æ€ |
|------|-------|------|------|
| **Database Schema** | 0 | 6å±‚äººæ ¼å»ºæ¨¡(èº«ä»½/è®¤çŸ¥/è¯­è¨€/æƒ…æ„Ÿ/ç¤¾äº¤/æ—¶ç©º) | âœ… å®Œæˆ |
| **Persona Profiles Table** | 0 | 30+å­—æ®µå­˜å‚¨äººæ ¼ç‰¹å¾(PostgreSQL) | âœ… å®Œæˆ |
| **Relationship Profiles Table** | 0 | å…³ç³»å›¾è°±(äº²å¯†åº¦/æ­£å¼åº¦/ä¿¡ä»»åº¦) | âœ… å®Œæˆ |
| **Evaluation Metrics Table** | 0 | è¯„æµ‹æŒ‡æ ‡(BLEU/ROUGE/å›¾çµæµ‹è¯•) | âœ… å®Œæˆ |
| **Profile Analyzer** | 1 | ç»Ÿè®¡åˆ†æ500æ¡æ¶ˆæ¯(emoji/ä¿šè¯­/æ­£å¼åº¦) | âœ… å®Œæˆ |
| **Relationship Analyzer** | 1 | äº²å¯†åº¦å…¬å¼(é¢‘ç‡35%+é•¿åº¦25%+æƒ…æ„Ÿ25%+æ—¶é•¿15%) | âœ… å®Œæˆ |
| **Evaluation Metrics** | 1 | é£æ ¼ä¸€è‡´æ€§(Cosineè·ç¦»)+å†…å®¹è´¨é‡(BLEU/ROUGE) | âœ… å®Œæˆ |
| **AI-Powered Deep Analysis** | 1 | Gemini 2.0 Flashåˆ†æ100æ¡æ ·æœ¬(ä»·å€¼è§‚/æ¨ç†æ¨¡å¼) | âœ… å®Œæˆ |
| **Sample Augmenter** | 2 | 4ç§å¢å¼ºç­–ç•¥(é£æ ¼è¿ç§»/åœºæ™¯æ³›åŒ–/å…³ç³»å¯¹æ¯”/è´Ÿæ ·æœ¬æŒ–æ˜) | âœ… å®Œæˆ |
| **Multi-Task Trainer** | 2 | è”åˆæŸå¤±å‡½æ•°(Gen+Style+Relation+Contrastive) | âœ… å®Œæˆ |
| **Style Loss Module** | 2 | é£æ ¼embedding Cosineè·ç¦»ä¼˜åŒ–(æƒé‡0.3) | âœ… å®Œæˆ |
| **Contrastive Learning** | 2 | InfoNCEå¯¹æ¯”å­¦ä¹ æŸå¤±(æƒé‡0.1) | âœ… å®Œæˆ |
| **Context Detector** | 3 | 4ç»´æ£€æµ‹(æ—¶é—´/ç©ºé—´/ç¤¾äº¤/æƒ…æ„Ÿ)+å…³é”®è¯æ¨¡å¼åŒ¹é… | âœ… å®Œæˆ |
| **Persona Selector** | 3 | 6å±‚æƒé‡åŠ¨æ€è°ƒæ•´(ä¸“ä¸šåœºæ™¯vsäº²å¯†åœºæ™¯) | âœ… å®Œæˆ |
| **Conversation Memory** | 3 | 3å±‚è®°å¿†(çŸ­æœŸ10è½®/ä¸­æœŸè¯é¢˜/é•¿æœŸæ¨¡å¼) | âœ… å®Œæˆ |
| **Enhanced Prompt Builder** | 3 | 5ç»„ä»¶èåˆ(äººæ ¼+ä¸Šä¸‹æ–‡+è®°å¿†+å…³ç³»+å»ºè®®) | âœ… å®Œæˆ |
| **Style Calibrator** | 3 | æ­£å¼åº¦/å¹½é»˜/emoji/é•¿åº¦åŠ¨æ€æ ¡å‡† | âœ… å®Œæˆ |
| **Fact Checker** | 3 | æ—¶é—´é€»è¾‘+å…³ç³»ä¸€è‡´æ€§éªŒè¯ | âœ… å®Œæˆ |
| **Feedback Collector** | 4 | æ˜¾å¼(ğŸ‘ğŸ‘è¯„åˆ†)+éšå¼(ç¼–è¾‘/é‡ç”Ÿæˆ)åé¦ˆæ”¶é›† | âœ… å®Œæˆ |
| **Reward Model** | 4 | 4ç»´è¯„åˆ†(å‡†ç¡®æ€§/é£æ ¼/å…³ç³»/äº’åŠ¨)+Geminiè¾…åŠ© | âœ… å®Œæˆ |
| **Online Learner** | 4 | å¢é‡æ›´æ–°persona(>100æ ·æœ¬è§¦å‘è‡ªåŠ¨è®­ç»ƒ) | âœ… å®Œæˆ |
| **Drift Detector** | 4 | äººæ ¼æ¼‚ç§»ç›‘æµ‹(é˜ˆå€¼20%)+è´¨é‡é¢„è­¦(é˜ˆå€¼15%) | âœ… å®Œæˆ |
| **A/B Testing** | 4 | å¤šç‰ˆæœ¬å¯¹æ¯”+æµé‡åˆ†é…+t-testæ˜¾è‘—æ€§æ£€éªŒ | âœ… å®Œæˆ |
| **Values Inferencer** | 5 | 15ç±»ä»·å€¼è¯†åˆ«+å†²çªæ£€æµ‹+ä¼˜å…ˆçº§å±‚çº§æ„å»º | âœ… å®Œæˆ |
| **Emotions Tracker** | 5 | è®¤çŸ¥è¯„ä»·ç†è®º(Scherer 4ç»´)+12ç§æƒ…æ„Ÿåˆ†ç±» | âœ… å®Œæˆ |
| **Causal Reasoner** | 5 | 5ç§æ¨ç†(å› æœ/æ¼”ç»/å½’çº³/ç±»æ¯”/æº¯å› )+NetworkXçŸ¥è¯†å›¾è°± | âœ… å®Œæˆ |
| **Theory of Mind** | 6 | 3å±‚é€è§†é€’å½’(ä¿¡å¿µ/æ„å›¾/ååº”)+å‡†ç¡®ç‡è·Ÿè¸ª | âœ… å®Œæˆ |
| **Narrative Generator** | 6 | ç”Ÿå‘½äº‹ä»¶æå–(10ç±»)+è½¬æŠ˜ç‚¹+12ç§ä¸»é¢˜+è¿è´¯æ€§è¯„ä¼° | âœ… å®Œæˆ |
| **Model Quantization** | 7B.1 | INT8é‡åŒ–+50%å‰ªæ+çŸ¥è¯†è’¸é¦(å¤§å°-60%/é€Ÿåº¦+3.2x) | âœ… å®Œæˆ |
| **A/B Framework** | 7B.2 | å®éªŒç®¡ç†+è‡ªåŠ¨æµé‡åˆ†é…+å®æ—¶æŒ‡æ ‡èšåˆ | âœ… å®Œæˆ |
| **Intelligent Cache** | 7B.3 | 4ç­–ç•¥èåˆé¢„çƒ­(é¢‘ç‡0.4+æ—¶é—´0.3+é¢„æµ‹0.2+ååŒ0.1) | âœ… å®Œæˆ |
| **Load Testing** | 7C.1 | Locust 1000å¹¶å‘+5ç§ç”¨æˆ·è¡Œä¸º(p95<200ms) | âœ… å®Œæˆ |
| **Production Deploy** | 7C.2 | Docker Compose 8å®¹å™¨+ä¸€é”®éƒ¨ç½²è„šæœ¬+å¥åº·æ£€æŸ¥ | âœ… å®Œæˆ |

### è®­ç»ƒæµç¨‹

```mermaid
sequenceDiagram
    participant U as ç”¨æˆ·
    participant F as å‰ç«¯
    participant B as Backend API
    participant TS as Training Sample Generator
    participant ML as ML Server
    participant DB as Database
    
    U->>F: ä¸Šä¼ è®°å¿†æ•°æ®
    F->>B: POST /api/import
    B->>DB: å­˜å‚¨åŸå§‹è®°å¿†
    B-->>F: å¯¼å…¥å®Œæˆ
    
    U->>F: è§¦å‘è®­ç»ƒæ ·æœ¬ç”Ÿæˆ
    F->>B: POST /api/training/samples/generate
    B->>TS: ç”Ÿæˆè®­ç»ƒæ ·æœ¬
    TS->>DB: æŸ¥è¯¢è®°å¿†(Google/Instagram/WeChat)
    TS->>TS: æå–å¯¹è¯å¯¹(user_response, context)
    TS->>DB: å­˜å‚¨è®­ç»ƒæ ·æœ¬
    TS-->>B: è¿”å›ç»Ÿè®¡(samplesCreated)
    B-->>F: ç”Ÿæˆå®Œæˆ
    
    U->>F: æŸ¥çœ‹è®­ç»ƒæ ·æœ¬
    F->>B: GET /api/training/samples
    B->>DB: æŸ¥è¯¢æ ·æœ¬(å¸¦è¿‡æ»¤)
    DB-->>B: è¿”å›æ ·æœ¬åˆ—è¡¨
    B-->>F: æ˜¾ç¤ºæ ·æœ¬
    
    Note over U,F: Phase 4: åœ¨çº¿å­¦ä¹ åé¦ˆ
    U->>F: å¯¹AIå›å¤æ‰“åˆ†(ğŸ‘/ğŸ‘)
    F->>B: POST /api/feedback
    B->>ML: è®¡ç®—å¥–åŠ±ä¿¡å·
    ML->>ML: æ›´æ–°Reward Model
    ML->>ML: è§¦å‘Online Learner
    ML->>DB: æ›´æ–°äººæ ¼å‘é‡
    ML-->>B: å­¦ä¹ å®Œæˆ
    B-->>F: ç¡®è®¤æ”¶åˆ°
```

### è¿è¡Œæµç¨‹

#### 1. å¯åŠ¨ Backend (TypeScript)

```bash
cd Self_AI_Agent
npm install
npm run dev
```

**ç›‘å¬ç«¯å£**: `8787`  
**ç¯å¢ƒå˜é‡**:
```bash
export DATABASE_URL="postgresql://user:pass@localhost:5432/soma"
export GEMINI_API_KEY="your_gemini_api_key"
export REDIS_URL="redis://localhost:6379"
```

#### 2. å¯åŠ¨ ML Server (Python - å¯é€‰)

```bash
cd Self_AI_Agent/src/ml
pip install -r requirements.txt
python ml_server.py
```

**ç›‘å¬ç«¯å£**: `8788`  
**åŠŸèƒ½**: è®¤çŸ¥æ¨ç†ã€ä»·å€¼è§‚åˆ†æã€æƒ…æ„Ÿè¿½è¸ªã€å› æœæ¨ç†

#### 3. è®­ç»ƒæ ·æœ¬ç”Ÿæˆ

**API**: `POST /api/training/samples/generate`

**å‚æ•°**:
```json
{
  "userId": "user@example.com",
  "source": "all",           // all | google | instagram | wechat
  "minQuality": 0.3,         // æœ€å°è´¨é‡åˆ†æ•°
  "maxSamples": 200,         // æœ€å¤§æ ·æœ¬æ•°
  "jaccardThreshold": 0.85,  // Jaccardç›¸ä¼¼åº¦é˜ˆå€¼
  "semanticThreshold": 0.95  // è¯­ä¹‰ç›¸ä¼¼åº¦é˜ˆå€¼
}
```

**è¿”å›**:
```json
{
  "samplesCreated": 150,
  "timeMs": 2340
}
```

#### 4. æŸ¥è¯¢è®­ç»ƒæ ·æœ¬

**API**: `GET /api/training/samples?userId=user@example.com&limit=50&offset=0`

**è¿‡æ»¤å‚æ•°**:
- `style`: é£æ ¼è¿‡æ»¤ (technical, casual, formal...)
- `intent`: æ„å›¾è¿‡æ»¤ (question, statement, work...)
- `source`: æ¥æºè¿‡æ»¤ (google, instagram, wechat)
- `template`: æ¨¡æ¿è¿‡æ»¤ (0=éæ¨¡æ¿, 1=æ¨¡æ¿)
- `order`: æ’åº (created_at_desc, quality_desc)

**è¿”å›**:
```json
{
  "items": [
    {
      "id": "sample_001",
      "user_response": "æˆ‘ä»Šå¤©å¥èº«ä¸€å°æ—¶,æ„Ÿè§‰å¾ˆæ£’!",
      "context": "{\"recent_messages\": [...]}",
      "style_tags": "[\"casual\", \"positive\"]",
      "intent_tags": "[\"share_experience\"]",
      "quality_score": 0.85,
      "source": "wechat",
      "negative_response": null,
      "created_at": 1704067200000
    }
  ],
  "total": 150
}
```

#### 5. åˆ é™¤è®­ç»ƒæ ·æœ¬

**API**: `DELETE /api/training/samples/:id`

#### 6. åé¦ˆæ”¶é›† (Phase 4)

**API**: `POST /api/feedback`

```json
{
  "userId": "user@example.com",
  "conversationId": "conv_123",
  "agentResponse": "æ ¹æ®ä½ çš„è®°å¿†...",
  "rating": 5,
  "feedbackType": "style",
  "feedbackText": "å›å¤å¤ªæ­£å¼äº†"
}
```

#### 7. A/B æµ‹è¯• (Phase 4)

**åˆ›å»ºå¯¹æ¯”**: `POST /api/ab/generate`
```json
{
  "userId": "user@example.com",
  "prompts": ["æ€»ç»“æˆ‘æœ€è¿‘çš„é”»ç‚¼è®°å½•"],
  "modelA": "persona_v1",
  "modelB": "persona_v2"
}
```

**æŠ•ç¥¨**: `POST /api/ab/vote`
```json
{
  "pairId": "pair_001",
  "choice": "A"  // A | B | tie | skip
}
```

#### 8. è¯„æµ‹ä¸çœ‹æ¿

è®¿é—® `/admin` æŸ¥çœ‹:
- è‡ªåŠ¨è¯„æµ‹ç»“æœ(Style Adherence, Factuality, Helpfulness)
- A/Bæµ‹è¯•å¯¹æ¯”
- äººå®¡é˜Ÿåˆ—

### æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | å½“å‰çŠ¶æ€ |
|------|--------|---------|
| **è®­ç»ƒæ ·æœ¬ç”Ÿæˆ** | <5s (200æ ·æœ¬) | âœ… è¾¾æ ‡ |
| **æ ·æœ¬å»é‡** | Jaccard>0.85 | âœ… è¾¾æ ‡ |
| **è¯­ä¹‰ç›¸ä¼¼åº¦** | <0.95 | âœ… è¾¾æ ‡ |
| **è´¨é‡è¿‡æ»¤** | >0.3åˆ† | âœ… è¾¾æ ‡ |
| **åé¦ˆå“åº”** | <100ms | âœ… è¾¾æ ‡ |
| **åœ¨çº¿å­¦ä¹ ** | 10æ ·æœ¬è§¦å‘ | âœ… è¾¾æ ‡ |
| **æ¨¡å‹æ¨ç†** | <500ms | âœ… è¾¾æ ‡ |
| **ç¼“å­˜å‘½ä¸­ç‡** | >80% | âœ… è¾¾æ ‡ |
| **å¹¶å‘æ”¯æŒ** | 1000+ | âœ… è¾¾æ ‡ |

### æ•°æ®åº“è¡¨ç»“æ„

#### training_samples

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | TEXT | ä¸»é”® |
| user_id | TEXT | ç”¨æˆ·ID |
| user_response | TEXT | ç”¨æˆ·å›å¤(ç›®æ ‡è¾“å‡º) |
| context | TEXT | å¯¹è¯ä¸Šä¸‹æ–‡(JSON) |
| style_tags | TEXT | é£æ ¼æ ‡ç­¾(JSONæ•°ç»„) |
| intent_tags | TEXT | æ„å›¾æ ‡ç­¾(JSONæ•°ç»„) |
| quality_score | REAL | è´¨é‡åˆ†æ•°(0-1) |
| source | TEXT | æ¥æº(google/instagram/wechat) |
| negative_response | TEXT | è´Ÿæ ·æœ¬(å¯é€‰) |
| negative_type | TEXT | è´Ÿæ ·æœ¬ç±»å‹ |
| template_based | INTEGER | æ˜¯å¦åŸºäºæ¨¡æ¿(0/1) |
| created_at | INTEGER | åˆ›å»ºæ—¶é—´æˆ³ |

#### reward_scores (Phase 4)

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | TEXT | ä¸»é”® |
| user_id | TEXT | ç”¨æˆ·ID |
| conversation_id | TEXT | å¯¹è¯ID |
| agent_response | TEXT | AIå›å¤ |
| rating | INTEGER | è¯„åˆ†(1-5) |
| feedback_type | TEXT | åé¦ˆç±»å‹ |
| accuracy_score | REAL | å‡†ç¡®æ€§åˆ†æ•° |
| style_score | REAL | é£æ ¼åˆ†æ•° |
| relationship_score | REAL | å…³ç³»åˆ†æ•° |
| engagement_score | REAL | å‚ä¸åº¦åˆ†æ•° |
| total_score | REAL | æ€»åˆ† |
| created_at | INTEGER | åˆ›å»ºæ—¶é—´æˆ³ |

#### preference_pairs (Phase 4)

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | TEXT | ä¸»é”® |
| user_id | TEXT | ç”¨æˆ·ID |
| prompt | TEXT | æç¤ºè¯ |
| response_a | TEXT | å›å¤A |
| response_b | TEXT | å›å¤B |
| preference | TEXT | åå¥½(a/b/tie) |
| context | TEXT | ä¸Šä¸‹æ–‡(JSON) |
| created_at | INTEGER | åˆ›å»ºæ—¶é—´æˆ³ |

### ä¼˜åŒ–è®¡åˆ’æ€»ç»“

æ ¹æ®ä»Šå¤©çš„å…¨é¢æŠ€æœ¯è¯„ä¼°,æˆ‘ä»¬è¯†åˆ«å‡º**7ä¸ªå¾…ä¼˜åŒ–æ–¹å‘**:

#### 1ï¸âƒ£ æ¨¡å—è¾¹ç•Œä¸ç¼–è¯‘ä¿®å¤ (0-2å‘¨) âš ï¸ CRITICAL
- **é—®é¢˜**: 156ä¸ªTypeScriptç¼–è¯‘é”™è¯¯,ä¸»è¦åœ¨server.ts
- **è§£å†³**: ä¿®å¤æ¨¡å—å¯¼å…¥/å¯¼å‡ºä¸åŒ¹é…,å®‰è£…ç¼ºå¤±çš„npmä¾èµ–
- **å½±å“**: é˜»å¡ç”Ÿäº§éƒ¨ç½²

#### 2ï¸âƒ£ å®‰å…¨åŠ å›º (0-2å‘¨) ğŸ” HIGH
- **é—®é¢˜**: ç¡¬ç¼–ç WeChatå¯†é’¥,è‡ªå®šä¹‰HMACè®¤è¯
- **è§£å†³**: ç§»é™¤ç¡¬ç¼–ç å¯†é’¥,å®ç°JWT+åˆ·æ–°ä»¤ç‰Œ,Helmetä¸­é—´ä»¶
- **å½±å“**: ç”Ÿäº§å®‰å…¨é£é™©

#### 3ï¸âƒ£ ç¼“å­˜æ€§èƒ½ä¼˜åŒ– (0-2å‘¨) âš¡ HIGH
- **é—®é¢˜**: Redis `keys()` é˜»å¡æ“ä½œ,å‘½ä¸­ç‡è®¡æ•°åœ¨å†…å­˜ä¸­
- **è§£å†³**: ä½¿ç”¨`SCAN`è¿­ä»£å™¨,RedisåŸå­è®¡æ•°å™¨,å®Œæˆç¼“å­˜é¢„çƒ­æ‰§è¡Œ
- **å½±å“**: ç”Ÿäº§ç¯å¢ƒRedisæ€§èƒ½

#### 4ï¸âƒ£ æ¨ç†å¼•æ“ä¼˜åŒ– (3-4å‘¨) ğŸš€ MEDIUM
- **é—®é¢˜**: ç¼ºå°‘vLLM/TGIåŠ é€Ÿ,é‡åŒ–ä¸å®Œæ•´,å‰ªæä¸ºéç»“æ„åŒ–
- **è§£å†³**: è¯„ä¼°vLLM/TensorRT,å®ç°é€šé“çº§ç»“æ„åŒ–å‰ªæ,é™æ€é‡åŒ–æ ¡å‡†
- **å½±å“**: æ¨ç†å»¶è¿Ÿå’Œååé‡

#### 5ï¸âƒ£ RL/Rewardæ¨¡å‹å¢å¼º (5-8å‘¨) ğŸ§  MEDIUM
- **é—®é¢˜**: ä¾èµ–Gemini APIè¯„åˆ†(æˆæœ¬+å»¶è¿Ÿ),A/Bæµ‹è¯•ç»Ÿè®¡ä¸ä¸¥è°¨
- **è§£å†³**: è®­ç»ƒæœ¬åœ°Reward Model(DeBERTa),Thompson Sampling,SPRT
- **å½±å“**: æˆæœ¬é™ä½å’Œå®éªŒæ•ˆç‡

#### 6ï¸âƒ£ æ•°æ®ç®¡é“ä¼˜åŒ– (5-8å‘¨) ğŸ“Š MEDIUM
- **é—®é¢˜**: åŒæ­¥åµŒå…¥è®¡ç®—,å‘é‡ç´¢å¼•é‡å»ºé˜»å¡
- **è§£å†³**: å¼‚æ­¥é˜Ÿåˆ—(Celery/RQ),å¢é‡ç´¢å¼•,æ‰¹å¤„ç†ä¼˜åŒ–
- **å½±å“**: å¯¼å…¥é€Ÿåº¦å’Œç”¨æˆ·ä½“éªŒ

#### 7ï¸âƒ£ ç³»ç»Ÿå¯é æ€§ (2-3æœˆ) ğŸ›¡ï¸ LOW
- **é—®é¢˜**: ç¼ºå°‘SLO/error budget,æ— æ··æ²Œå·¥ç¨‹,æ— å¤šç§Ÿæˆ·éš”ç¦»
- **è§£å†³**: SREå®è·µ,æ•…éšœæ³¨å…¥æµ‹è¯•,DLP/å®¡è®¡,æˆæœ¬ä¼˜åŒ–
- **å½±å“**: ç”Ÿäº§çº§å¯é æ€§

### å¿«é€Ÿå¼€å§‹

```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/mzpatrick0529-mzyh/Soma.git
cd Soma

# 2. å®‰è£…ä¾èµ–
npm install
cd Self_AI_Agent && npm install && cd ..

# 3. é…ç½®ç¯å¢ƒå˜é‡
export DATABASE_URL="your_db_url"
export GEMINI_API_KEY="your_api_key"
export REDIS_URL="redis://localhost:6379"

# 4. å¯åŠ¨æœåŠ¡
# ç»ˆç«¯1: å‰ç«¯
npm run dev

# ç»ˆç«¯2: åç«¯
cd Self_AI_Agent
npm run dev

# 5. è®¿é—®åº”ç”¨
# å‰ç«¯: http://localhost:8080
# Backend API: http://localhost:8787
# ML Server: http://localhost:8788 (å¯é€‰)
```

### ç›¸å…³æ–‡æ¡£

- [Phase 3 å®Œæ•´æŠ¥å‘Š](Self_AI_Agent/PHASE3_COMPLETE_REPORT.md) - ä¸Šä¸‹æ–‡æ„ŸçŸ¥æ¨ç†
- [Phase 4 å®Œæ•´æŠ¥å‘Š](Self_AI_Agent/PHASE4_COMPLETE.md) - åé¦ˆä¸åœ¨çº¿å­¦ä¹ 
- [Phase 5 å®Œæ•´æŠ¥å‘Š](Self_AI_Agent/PHASE5_COMPLETE.md) - ä»·å€¼è§‚ä¸æƒ…æ„Ÿ
- [Phase 6 å®Œæ•´æŠ¥å‘Š](Self_AI_Agent/PHASE6_COMPLETE.md) - è®¤çŸ¥å»ºæ¨¡
- [Phase 7 æœ€ç»ˆæ€»ç»“](Self_AI_Agent/PHASE7_FINAL_SUMMARY.md) - ç”Ÿäº§ä¼˜åŒ–
- [ç”Ÿäº§éƒ¨ç½²æŒ‡å—](Self_AI_Agent/PRODUCTION_DEPLOYMENT_GUIDE.md)
- [å…³é”®ä¼˜åŒ–åˆ†æ](Self_AI_Agent/CRITICAL_OPTIMIZATION_ANALYSIS.md)
- [æ·±åº¦ä¼˜åŒ–è®¡åˆ’](Self_AI_Agent/PHASE7_DEEP_OPTIMIZATION_PLAN.md)

---

## ğŸ—ºï¸ é¡¹ç›®è·¯çº¿å›¾

### âœ… å·²å®Œæˆ (2024 Q4)

- [x] åŸºç¡€èŠå¤©åŠŸèƒ½
- [x] ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- [x] è®°å¿†å­˜å‚¨å’Œæ£€ç´¢
- [x] å¾®ä¿¡æ•°æ®å¯¼å…¥
- [x] Instagram æ•°æ®å¯¼å…¥
- [x] Google Takeout å¯¼å…¥
- [x] RAG å¼•æ“ V1.0
- [x] å‘é‡æœç´¢é›†æˆ

### ğŸš§ å¼€å‘ä¸­ (2025 Q1)

- [ ] Personality V2.0 (è®°å¿†é©±åŠ¨æ¶æ„)
- [ ] HDBSCAN èšç±»ä¼˜åŒ–
- [ ] Me-Alignment æç¤ºå·¥ç¨‹
- [ ] è¯­éŸ³å¯¹è¯åŠŸèƒ½
- [ ] ç§»åŠ¨ç«¯é€‚é…

### ï¿½ï¿½ è®¡åˆ’ä¸­ (2025 Q2-Q3)

- [ ] è§†é¢‘åˆ†äº«åŠŸèƒ½
- [ ] åšå®¢å‘å¸ƒç³»ç»Ÿ
- [ ] iCloud å®æ—¶åŒæ­¥
- [ ] å¤šè¯­è¨€æ”¯æŒ
- [ ] AIè™šæ‹Ÿå½¢è±¡ç”Ÿæˆ
- [ ] æ•°å­—é—äº§ä¼ æ‰¿åè®®

### ğŸ”® æœªæ¥å±•æœ› (2025 Q4+)

- [ ] å¤šæ¨¡æ€äº¤äº’(AR/VR)
- [ ] æƒ…æ„Ÿè¯†åˆ«ä¼˜åŒ–
- [ ] ç¤¾åŒºåŠŸèƒ½
- [ ] ä¼ä¸šç‰ˆæœ¬
- [ ] å¼€æ”¾APIå¹³å°

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®!

### å¦‚ä½•è´¡çŒ®

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

### ä»£ç è§„èŒƒ

- ä½¿ç”¨ TypeScript
- éµå¾ª ESLint é…ç½®
- ç¼–å†™æœ‰æ„ä¹‰çš„æäº¤ä¿¡æ¯
- æ·»åŠ å¿…è¦çš„æµ‹è¯•
- æ›´æ–°ç›¸å…³æ–‡æ¡£

### æŠ¥å‘Šé—®é¢˜

å¦‚æœæ‚¨å‘ç° bug æˆ–æœ‰åŠŸèƒ½å»ºè®®,è¯·[åˆ›å»º Issue](https://github.com/mzpatrick0529-mzyh/Soma/issues)

---

## ğŸ“š æ–‡æ¡£

å®Œæ•´æ–‡æ¡£ä½äº `docs/` ç›®å½•:

- [å¿«é€Ÿå¼€å§‹](docs/guides/START_HERE.md)
- [ç³»ç»Ÿæ¶æ„](docs/STRUCTURE.md)
- [æ•°æ®åº“æ–‡æ¡£](docs/database/README.md)
- [æ³•å¾‹æ–‡æ¡£](docs/legal/README.md)
- [æŠ•èµ„ææ–™](docs/pitch/README.md)

---

## ğŸ“ è”ç³»æˆ‘ä»¬

- ğŸ“§ Email: contact@soma.ai
- ğŸ› Issues: [GitHub Issues](https://github.com/mzpatrick0529-mzyh/Soma/issues)
- ğŸ“– Documentation: [docs/](docs/)

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®å’ŒæœåŠ¡:

- [React](https://reactjs.org/) - å‰ç«¯æ¡†æ¶
- [Node.js](https://nodejs.org/) - åç«¯è¿è¡Œæ—¶
- [Supabase](https://supabase.com/) - åç«¯å³æœåŠ¡
- [OpenAI](https://openai.com/) - AI æ¨¡å‹
- [Tailwind CSS](https://tailwindcss.com/) - UIæ¡†æ¶
- [Vite](https://vitejs.dev/) - æ„å»ºå·¥å…·

ä»¥åŠæ‰€æœ‰è´¡çŒ®è€…å’Œç”¨æˆ·çš„æ”¯æŒ! â¤ï¸

---

<div align="center">

**ç”¨æŠ€æœ¯å»¶ç»­æƒ…æ„Ÿ,ç”¨AIä¼ æ‰¿è®°å¿†**

Made with ğŸ§¡ by Soma Team

[ç½‘ç«™](https://soma.ai) Â· [æ–‡æ¡£](docs/) Â· [åšå®¢](#) Â· [Twitter](#)

</div>
